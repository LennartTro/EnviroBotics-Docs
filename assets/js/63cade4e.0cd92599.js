"use strict";(self.webpackChunkenviro_botics_summer_school=self.webpackChunkenviro_botics_summer_school||[]).push([[198],{6914:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"tutorials/transition to hardware","title":"Transition to Hardware","description":"After testing and developing your BlueBoat controller in simulation, it\u2019s time to bring your setup into the real world. This page walks you through the essential steps for running your controller node on real hardware, including how to connect to the vehicle, arm it, test the motors, and send waypoint commands.","source":"@site/docs/tutorials/transition to hardware.md","sourceDirName":"tutorials","slug":"/tutorials/transition to hardware","permalink":"/EnviroBotics-Docs/docs/tutorials/transition to hardware","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"id":"transition to hardware","title":"Transition to Hardware"},"sidebar":"tutorialSidebar","previous":{"title":"Creating a BlueBoat Planner Node","permalink":"/EnviroBotics-Docs/docs/tutorials/planner node"},"next":{"title":"Troubleshooting","permalink":"/EnviroBotics-Docs/docs/troubleshooting/common-issues"}}');var r=s(4848),a=s(8453);const t={id:"transition to hardware",title:"Transition to Hardware"},i="Transition to Hardware",l={},d=[{value:"Required (but actually already installed - so skippable): MAVROS",id:"required-but-actually-already-installed---so-skippable-mavros",level:2},{value:"Connect to the Vehicle",id:"connect-to-the-vehicle",level:2},{value:"Why UDP is used in MAVLink communication",id:"why-udp-is-used-in-mavlink-communication",level:3},{value:"Arm the Vehicle",id:"arm-the-vehicle",level:2},{value:"Test Motors Manually",id:"test-motors-manually",level:2},{value:"Run the Controller Node",id:"run-the-controller-node",level:2},{value:"Send Target Waypoint",id:"send-target-waypoint",level:2},{value:"Stop the Mission",id:"stop-the-mission",level:2},{value:"Your controller is now live on the real BlueBoat hardware!",id:"your-controller-is-now-live-on-the-real-blueboat-hardware",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",...(0,a.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"transition-to-hardware",children:"Transition to Hardware"})}),"\n",(0,r.jsx)(n.p,{children:"After testing and developing your BlueBoat controller in simulation, it\u2019s time to bring your setup into the real world. This page walks you through the essential steps for running your controller node on real hardware, including how to connect to the vehicle, arm it, test the motors, and send waypoint commands."}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsx)(n.p,{children:"The process is similar to what you've done in simulation \u2014 just with real data and a real boat now."})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"required-but-actually-already-installed---so-skippable-mavros",children:"Required (but actually already installed - so skippable): MAVROS"}),"\n",(0,r.jsxs)(n.p,{children:["Make sure ",(0,r.jsx)(n.code,{children:"mavros"})," and related dependencies are installed on your system:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install ros-${ROS_DISTRO}-mavros ros-${ROS_DISTRO}-mavros-extras\nsudo apt install ros-${ROS_DISTRO}-mavros-msgs\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\nsudo apt install geographiclib-tools\nsudo geographiclib-get-geoids egm96-5\nsudo geographiclib-get-gravity egm2008\nsudo geographiclib-get-magnetic wmm2020\n\n"})}),"\n",(0,r.jsx)(n.h2,{id:"connect-to-the-vehicle",children:"Connect to the Vehicle"}),"\n",(0,r.jsx)(n.p,{children:"Start the mavros node and connect to the boat using UDP:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run mavros mavros_node --ros-args -p fcu_url:=udp://@192.168.2.2:14600 -p system_id:=255 -p component_id:=190 -p tgt_system:=1 -p tgt_component:=1\n"})}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsxs)("summary",{children:[" What is ",(0,r.jsx)("code",{children:"udp://"})," and why do we use UDP?"]}),"\nWhat is UDP?"]}),(0,r.jsx)(n.p,{children:"UDP (User Datagram Protocol) is a fast and lightweight network protocol used for sending data between systems on the same network."}),(0,r.jsx)(n.p,{children:"In your project, we use it to connect the MAVROS node (running on your computer) to the ArduPilot firmware (running on the boat) using MAVLink."}),(0,r.jsx)(n.h3,{id:"why-udp-is-used-in-mavlink-communication",children:"Why UDP is used in MAVLink communication"}),(0,r.jsx)(n.p,{children:"\u2705 Low latency \u2014 data is sent without delay"}),(0,r.jsx)(n.p,{children:"\u2705 Simple protocol \u2014 minimal overhead"}),(0,r.jsx)(n.p,{children:"\u274c No delivery guarantees \u2014 packets may be lost or arrive out of order"}),(0,r.jsx)(n.p,{children:"This is acceptable in robotics, where fresh data is more important than guaranteed delivery."})]}),"\n",(0,r.jsx)(n.h2,{id:"arm-the-vehicle",children:"Arm the Vehicle"}),"\n",(0,r.jsx)(n.p,{children:"Before the boat can move, you need to switch it to MANUAL mode and arm it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\nros2 service call /mavros/set_mode mavros_msgs/srv/SetMode "{custom_mode: \'MANUAL\'}"\nros2 service call /mavros/cmd/arming mavros_msgs/srv/CommandBool "{value: true}"\n\n'})}),"\n",(0,r.jsx)(n.h2,{id:"test-motors-manually",children:"Test Motors Manually"}),"\n",(0,r.jsx)(n.p,{children:"Move the motors forward"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ros2 topic pub -r 10 /mavros/rc/override mavros_msgs/msg/OverrideRCIn "{channels: [1600, 0, 1600, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Stop all motor movement"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ros2 topic pub -r 10 /mavros/rc/override mavros_msgs/msg/OverrideRCIn "{channels: [1500, 0, 1500, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"run-the-controller-node",children:"Run the Controller Node"}),"\n",(0,r.jsx)(n.p,{children:"Make sure the blueboat_control package is installed on your system and sourced via:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/gz_ws/install/setup.bash\n"})}),"\n",(0,r.jsx)(n.p,{children:"Now launch your real-time controller node for the BlueBoat:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run blueboat_control asv_pid_rc   --ros-args -p arrival_radius_m:=1.5              -p invert_throttle:=false              -p invert_steer:=false\n\n"})}),"\n",(0,r.jsx)(n.h2,{id:"send-target-waypoint",children:"Send Target Waypoint"}),"\n",(0,r.jsx)(n.p,{children:"You can now send the boat to a specific location:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'ros2 topic pub -r 10 /asv/target geometry_msgs/msg/Point "{x: 48.28407529304395, y: 11.605825035798238, z: 0.0}"\n\n'})}),"\n",(0,r.jsx)(n.h2,{id:"stop-the-mission",children:"Stop the Mission"}),"\n",(0,r.jsx)(n.p,{children:"If something goes wrong or you want to stop movement immediately, publish a stop signal:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\nros2 topic pub /asv/stop std_msgs/msg/Bool "data: true"\n\n'})}),"\n",(0,r.jsx)(n.h2,{id:"your-controller-is-now-live-on-the-real-blueboat-hardware",children:"Your controller is now live on the real BlueBoat hardware!"}),"\n",(0,r.jsx)(n.p,{children:"Continue refining your system and testing it safely in controlled environments before heading out to the lake."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install ros-${ROS_DISTRO}-mavros ros-${ROS_DISTRO}-mavros-extras\n\nsudo apt install ros-${ROS_DISTRO}-mavros-msgs\n\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\nsudo apt install geographiclib-tools\nsudo geographiclib-get-geoids egm96-5\nsudo geographiclib-get-gravity egm2008\nsudo geographiclib-get-magnetic wmm2020\n\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run mavros mavros_node --ros-args -p fcu_url:=udp://@192.168.2.2:14600 -p system_id:=255 -p component_id:=190 -p tgt_system:=1 -p tgt_component:=1\n\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\nros2 service call /mavros/set_mode mavros_msgs/srv/SetMode "{custom_mode: \'MANUAL\'}"\nros2 service call /mavros/cmd/arming mavros_msgs/srv/CommandBool "{value: true}"\n\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\nros2 topic pub -r 10 /mavros/rc/override mavros_msgs/msg/OverrideRCIn "{channels: [1600, 0, 1600, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}"\n\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\nros2 topic pub -r 10 /asv/target geometry_msgs/msg/Point "{x: 48.28407529304395, y: 11.605825035798238, z: 0.0}"\n\n\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\nros2 topic pub -r 10 /mavros/rc/override mavros_msgs/msg/OverrideRCIn "{channels: [1500, 0, 1500, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]}"\n\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\nros2 run blueboat_control asv_pid_rc   --ros-args -p arrival_radius_m:=1.5              -p invert_throttle:=false              -p invert_steer:=false\n\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\nros2 topic pub /asv/stop std_msgs/msg/Bool "data: true"\n\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>i});var o=s(6540);const r={},a=o.createContext(r);function t(e){const n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);